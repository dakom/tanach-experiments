<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device_width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <title>Tanach Viewer - Letters RGBA</title>

    <!-- inject:css -->
    <link rel="stylesheet" href="css/styles.css">
    <!-- endinject -->

    <script src="external-libs/jquery/jquery-1.12.4.min.js"></script>
    <script src="external-libs/greensock/TweenLite.min.js"></script>
    <script src="external-libs/pixi/pixi.min.js"></script>
    <script src="external-libs/kittykatattack/scaleToWindow/scaleToWindow.js"></script>
    <!-- inject:js -->
    <script src="js/core/tanach-experiments-core.js"></script>
    <script src="js/core/books/Books.js"></script>
    <script src="js/core/interactions/Touch.js"></script>
    <script src="js/core/utils/Gematria.js"></script>
    <script src="js/core/utils/TextSubstitution.js"></script>
    <script src="js/modules/ratio-draw/GematriaImage.js"></script>
    <script src="js/modules/ratio-draw/Main.js"></script>
    <script src="js/modules/ratio-draw/TempTest.js"></script>
    <script src="js/modules/rgba-letters/LettersFilter.js"></script>
    <script src="js/modules/rgba-letters/LettersPaletteFilter.js"></script>
    <script src="js/modules/rgba-letters/LettersTexture.js"></script>
    <script src="js/modules/rgba-letters/Main.js"></script>
    <!-- endinject -->

</head>

<body>
  <script id="default-vertex-shader" type="notjs">

  attribute vec2 aVertexPosition;
  attribute vec2 aTextureCoord;
  uniform mat3 projectionMatrix;
  varying vec2 vTextureCoord;
  void main(void){
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
  }

</script>

<script id="default-fragment-shader" type="notjs">
  precision mediump float;

  uniform sampler2D uSampler;
  uniform sampler2D lSampler;
  varying vec2 vTextureCoord;

  void main() {
    gl_FragColor = texture2D(lSampler, vTextureCoord);
  }

</script>

<script id="letters-palette-fragment-shader" type="notjs">

  //https://github.com/pixijs/pixi.js/blob/364c2457c6693d6e3ab68786539c53d566503e7b/src/core/renderers/webgl/shaders/Shader.js#L232-L463

  precision mediump float;

  uniform sampler2D uSampler;
  uniform sampler2D lSampler;
  uniform vec4 palette[1];
  varying vec2 vTextureCoord;

  void main() {

    vec4 colorLookup = texture2D(lSampler, vTextureCoord);

    vec4 pColor = palette[0];
    gl_FragColor.r = pColor.x; //base letter ... not working yet :\
    gl_FragColor.a = 1.0;

    //finalColor = pallete[colorLookup.g]; //atbash
    //finalColor = pallete[colorLookup.b]; //albam


  }

</script>



    <script type="text/javascript">
        $(document).ready(function() {
          RGBA_LETTERS.Start({
            canvasWidth: 1024,
            canvasHeight: 768,
            bgColor: "#ccc",
          });

        });
    </script>
</body>
</html>

var TXP=function(e){function t(){requestAnimationFrame(t),e.renderer.render(e.stage)}var o;return e.DoScaleWindow=function(){e.windowScaleRatio=scaleToWindow(e.renderer.view,o)},e.Init=function(n,r,a,i){e.canvasWidth=n,e.canvasHeight=r,o=a,e.renderer=PIXI.autoDetectRenderer(n,r),document.body.appendChild(e.renderer.view),e.stage=new PIXI.Container,requestAnimationFrame(t),i===!0&&(e.DoScaleWindow(),window.addEventListener("resize",e.DoScaleWindow))},e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}}),TXP=function(e){function t(e,t){e.on("mouseover",function(o){t(e,o)})}function o(e,t){e.on("tap",function(o){t(e,o)}),e.on("click",function(o){t(e,o)})}function n(e,t){e.on("mousedown",function(o){t(e,o)}),e.on("touchstart",function(o){t(e,o)})}function r(e,t){e.on("mousemove",function(o){t(e,o)}),e.on("touchmove",function(o){t(e,o)})}function a(e,t){e.on("mouseup",function(o){t(e,o)}),e.on("mouseupoutside",function(o){t(e,o)}),e.on("touchend",function(o){t(e,o)}),e.on("touchendoutside",function(o){t(e,o)})}return e.Interactions.TouchEvent={addHoverListener:t,addTouchStartListener:n,addTouchMoveListener:r,addTouchEndListener:a,addClickTapListener:o},e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}}),TXP=function(e){function t(e){i=new PIXI.loaders.Loader,i.add("books","media/tanach/books/all-books.json"),void 0!==e&&(void 0!==e.onProgress&&i.on("progress",e.onProgress),void 0!==e.onError&&i.on("error",e.onError),void 0!==e.onLoad&&i.on("load",e.onLoad),void 0!==e.onComplete&&i.on("complete",e.onComplete)),i.load()}function o(){return i.resources.books.data}function n(){if(void 0===s){d=[],s=[];var e=o();bookMax=e.length;for(var t=0;t<bookMax;t++)for(var n=e[t],r=0;r<n.length;r++)for(var a=n[r],i=0;i<a.length;i++)for(var u=a[i],h=0;h<u.length;h++){var c=u[h];s.push(c),d.push({book:t,pasuk:r,word:i,letter:h})}}return s}function r(e){if(void 0===u){u=[];var t=o();bookMax=t.length;for(var n=0;n<bookMax;n++)for(var r=t[n],a=0;a<r.length;a++)for(var i=r[a],s=0;s<i.length;s++){var d=i[s];u.push(d)}}return u}function a(){return n(),d}var i,s,u,d;return e.TanachData.Books={Load:t,GetData:o,GetAllLetters:n,GetAllWords:r,GetLetterInfos:a},e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}}),TXP=function(e){function t(e){n=new PIXI.loaders.Loader,n.add("letters","media/tanach/letters/letters.json"),void 0!==e&&(void 0!==e.onProgress&&n.on("progress",e.onProgress),void 0!==e.onError&&n.on("error",e.onError),void 0!==e.onLoad&&n.on("load",e.onLoad),void 0!==e.onComplete&&n.on("complete",e.onComplete)),n.load()}function o(){return n.resources.letters.data}var n;return e.TanachData.Letters={Load:t,GetData:o},e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}}),TXP=function(e){function t(e){i=new PIXI.loaders.Loader;for(var t=0;t<s.length;t++){var o=s[t];i.add(o,"media/tanach/books/separate-books/"+o+".json")}void 0!==e&&(void 0!==e.onProgress&&i.on("progress",e.onProgress),void 0!==e.onError&&i.on("error",e.onError),void 0!==e.onLoad&&i.on("load",e.onLoad),void 0!==e.onComplete&&i.on("complete",e.onComplete)),i.load()}function o(e){return i.resources[e].data}function n(e){return o(e).data}function r(){for(var e=[],t=0;t<s.length;t++){var o=s[t];e.push(n(o))}return e}function a(e){void 0!==e&&null!==e||(e={}),e.benchMark&&(e.startTime=(new Date).getTime());for(var t=void 0===e.bookStartIndex?0:e.bookStartIndex,o=void 0===e.bookEndIndex?s.length:e.bookEndIndex,r=[],a=t;a<o;a++)for(var i=n(s[a]),u=0;u<i.length;u++)for(var d=i[u],h=0;h<d.length;h++){var c=d[h];if(1==e.gematriaPerWord){var l=TXP.Utils.Gematria.CountHebArray(c);r.push(l)}else for(var m=0;m<c.length;m++){var v=c[m];if(1==e.gematriaPerLetter){var l=TXP.Utils.TextSubstitution.GEMATRIA_ABSOLUTE[v];r.push(l)}else r.push(v)}}if(e.benchMark){var f=(new Date).getTime()-e.startTime;console.log("total time: "+f+" milliseconds")}return r}var i,s=["bereishit","shmot","vayikra","bamidbar","devarim","yehoshua","shoftim","shmueli","shmuelii","melachimi","melachimii","yishayahu","yirmiyahu","yechezkiel","hosea","yoel","amos","ovadiah","yonah","micha","nachum","chabakuk","zephaniah","chaggai","zechariah","malachai","tehillim","mishlei","iyov","shirhashirim","ruth","eicha","kohelet","esther","daniel","ezra","nechemia","divreihayamimi","divreihayamimii"],u=["Bereishit","Shmot","Vayikra","Bamidbar","Devarim","Yehoshua","Shoftim","Shmuel I","Shmuel II","Melachim I","Melachim II","Yishayahu","Yirmiyahu","Yechezkiel","Hosea","Yoel","Amos","Ovadiah","Yonah","Micha","Nachum","Chabakuk","Zephaniah","Chaggai","Zechariah","Malachai","Tehillim","Mishlei","Iyov","Shir HaShirim","Ruth","Eicha","Kohelet","Esther","Daniel","Ezra","Nechemia","Divreihayamim I","Divreihayamim II"];return e.TanachData.SeparateBooks={Load:t,GetData:n,GetCombined:r,GetConfig:o,GetFlattened:a,names:s,niceNames:u},e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}}),TXP=function(e){var t=function(e){PIXI.Filter.call(this,TXP.Shaders.GetVertexCode("default"),TXP.Shaders.GetFragmentCode("value-match"),{rVal:{value:0},gVal:{value:0},bVal:{value:0},matchColor:{value:[1,1,1,1]},bgColor:{value:[0,0,0,1]}})};return t.prototype=Object.create(PIXI.Filter.prototype),t.prototype.constructor=t,Object.defineProperties(t.prototype,{numberValue:{get:function(){var e=255*this.uniforms.rVal<<16&255,t=255*this.uniforms.gVal<<8&255,o=255*this.uniforms.bVal&255;return e+t+o},set:function(e){this.uniforms.rVal=(e>>16&255)/255,this.uniforms.gVal=(e>>8&255)/255,this.uniforms.bVal=(255&e)/255}},matchColor:{get:function(){return PIXI.utils.rgb2hex(this.uniforms.matchColor)},set:function(e){this.uniforms.matchColor=PIXI.utils.hex2rgb(e)}},bgColor:{get:function(){return PIXI.utils.rgb2hex(this.uniforms.bgColor)},set:function(e){this.uniforms.bgColor=PIXI.utils.hex2rgb(e)}}}),e.Shaders.MatchValueFilter=t,e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}}),TXP=function(e){function t(e,t){return"shaders/"+e+"."+t}function o(e,o){n=new PIXI.loaders.Loader;for(var i=0;i<e.vertex.length;i++){var s=e.vertex[i],u=t(s,r);n.add(u)}for(var i=0;i<e.fragment.length;i++){var s=e.fragment[i],u=t(s,a);n.add(u)}void 0!==o&&(void 0!==o.onProgress&&n.on("progress",o.onProgress),void 0!==o.onError&&n.on("error",o.onError),void 0!==o.onLoad&&n.on("load",o.onLoad),void 0!==o.onComplete&&n.on("complete",o.onComplete)),n.load()}var n,r="vert",a="frag";return e.Shaders.GetVertexCode=function(e){return n.resources[t(e,r)].data},e.Shaders.GetFragmentCode=function(e){return n.resources[t(e,a)].data},e.Shaders.Load=o,e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}});TXP=function(e){return e.Utils.Download=function(e,t,o){var n=document.createElement("a");if(o=o||"application/octet-stream",navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([e],{type:o}),t);if("download"in n)return n.href="data:"+o+","+encodeURIComponent(e),n.setAttribute("download",t),document.body.appendChild(n),setTimeout(function(){n.click(),document.body.removeChild(n)},66),!0;var r=document.createElement("iframe");return document.body.appendChild(r),r.src="data:"+o+","+encodeURIComponent(e),setTimeout(function(){document.body.removeChild(r)},333),!0},e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}}),TXP=function(e){function t(e,t){var n=0;void 0===t&&(t={});for(var r=0;r<e.length;r++)n+=o(e[r],t);return n}function o(e,t){void 0===t&&(t={});var o=e;return t.sofit!==!0?TXP.Utils.TextSubstitution.GEMATRIA_ABSOLUTE[o]:TXP.Utils.TextSubstitution.GEMATRIA_ABSOLUTE_SOFIT[o]}return e.Utils.Gematria={CountData:function(e,n){return e.constructor===Array?t(e,n):o(e,n)},CountHebLetter:o,CountHebArray:t},e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}}),TXP=function(e){return e.Utils.TextSubstitution={TEXT_HEBREW:[" ","א","ב","ג","ד","ה","ו","ז","ח","ט","י","כ","ל","מ","נ","ס","ע","פ","צ","ק","ר","ש","ת","ך","ם","ן","ף","ץ"],SUBSTITUTION_ATBASH:[0,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,12,10,9,6,5,0],SUBSTITUTION_ALBAM:[0,12,13,14,15,16,17,18,19,20,21,22,1,2,3,4,5,6,7,8,9,10,11,22,2,3,6,7,0],GEMATRIA_ABSOLUTE:[0,1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100,200,300,400,20,40,50,80,90,0],GEMATRIA_REDUCED:[0,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,2,4,5,8,9,0],GEMATRIA_ORDINAL:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,11,13,14,17,18,0],GEMATRIA_ABSOLUTE_SOFIT:[0,1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100,200,300,400,500,600,700,800,900,0],GEMATRIA_REDUCED_SOFIT:[0,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,0],GEMATRIA_ORDINAL_SOFIT:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,0],MILUI_OPTIONS:[0,[[1,12,26]],[[2,10,22],[2,22]],[[3,10,13,12],[3,13,12]],[[4,12,22],[4,12,10,22]],[[5,1],[5,10],[5,5]],[[6,6],[6,10,6],[6,1,6]],[[7,10,25]],[[8,10,22],[8,22]],[[9,10,22],[9,22]],[[10,6,4]],[[11,26]],[[12,13,4]],[[13,24]],[[14,6,25]],[[15,13,23]],[[16,10,25]],[[17,1],[17,10],[17,5]],[[18,4,10],[18,4,10,19]],[[19,6,26]],[[20,10,21],[20,21]],[[21,25],[21,10,25]],[[22,6],[22,10,6],[22,1,6]],[[11,26]],[[13,24]],[[14,6,25]],[[19,6,26]],[[18,4,10],[18,4,10,19]]]},e.Utils.TextSubstitution.GetTextFromArray=function(t){for(var o="",n=0;n<t.length;n++)o+=e.Utils.TextSubstitution.TEXT_HEBREW[t[n]];return o},e.Utils.TextSubstitution.GetMilui=function(t){for(var o=[],n=0;n<t.length;n++){var r=t[n];if(0==r)o.push(0);else for(var a=e.Utils.TextSubstitution.MILUI_OPTIONS[r][0],i=0;i<a.length;i++)o.push(a[i])}return o},e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}}),TXP=function(e){function t(e,t,o,n){var r=document.createElement("canvas");r.width=e,r.height=t;for(var a=function(){return void 0==r.getContext?G_vmlCanvasManager.initElement(r).getContext("2d"):r.getContext("2d")}(),i=a.createImageData(r.width,r.height),s=0,u=0;s<o.length&&u<i.data.length;s++){var d=o[s];i.data[u++]=d.r,i.data[u++]=d.g,i.data[u++]=d.b,i.data[u++]=d.a}return a.putImageData(i,0,0),void 0!==n&&n(i),PIXI.Texture.fromCanvas(r)}function o(e,o,n,r){for(var a=Math.ceil(e*o),i=[],s=0;s<a;s++)i[s]={r:n.r,g:n.g,b:n.g,a:n.a};return t(e,o,i,r)}function n(e,o,n,r){for(var a=[],i=0;i<n.length;i++){var s=n[i];a.push({r:s>>16&255,g:s>>8&255,b:255&s,a:255})}return t(e,o,a,r)}return e.Utils.Texture={Create:t,CreateNumbers:n,CreateSolid:o},e}(TXP||{Utils:{},Shaders:{},Interactions:{},TanachData:{}});